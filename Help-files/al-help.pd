#N canvas 580 53 611 325 10;
#X declare -path psycho;
#X obj 110 114 t b b;
#X obj 110 83 bng 15 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X msg 110 155 300 400 500;
#X msg 189 155 1 0.9 0.8;
#X obj 342 98 bng 15 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X msg 342 153 300 400 500;
#X msg 441 152 1 0.9 0.8;
#X obj 342 120 trigger bang bang;
#X obj 441 223 print AL;
#X obj 384 223 print Hz;
#X obj 125 221 print AL;
#X obj 110 247 print Hz;
#X text 455 186 <= vanilla;
#X text 101 23 Returns Audible Level AL(P) in dB after a masking stage
(according to Parncutt & Strasburger \, 1994).;
#X text 253 149 linear amplitue, f 8;
#X text 69 155 Freq;
#N canvas 880 71 385 298 AL 0;
#N canvas 544 79 376 391 YL 0;
#X obj 237 189 list store;
#X obj 124 97 until;
#X obj 124 210 list store;
#X obj 124 125 f;
#X obj 152 125 + 1;
#X msg 171 97 0, f 2;
#X msg 124 154 get \$1 1;
#X obj 124 185 t a a;
#X obj 114 295 list store, f 16;
#X msg 124 266 append \$1;
#X obj 294 38 inlet;
#X obj 67 40 inlet;
#X obj 114 331 outlet;
#X obj 67 331 outlet;
#X obj 67 70 trigger list bang bang bang list;
#N canvas 580 226 601 472 get-Lth 0;
#X obj 133 48 inlet;
#X obj 272 408 outlet;
#X obj 154 184 exp;
#X obj 75 247 expr (3.64 * pow($f1 \, -0.8));
#X obj 154 161 expr -0.6 * pow($f1 - 3.3 \, 2);
#X obj 343 160 expr (pow(10 \, -3) * pow($f1 \, 4));
#X obj 133 109 trigger float float float;
#X obj 154 206 * 6.5;
#X obj 178 299 expr $f1 - $f2 + $f3;
#X text 147 300 Lth;
#X obj 133 76 / 1000;
#X obj 272 346 expr $f2 - $f1;
#X obj 375 59 inlet;
#X text 423 112 dB;
#X obj 373 113 rmstodb;
#X text 280 378 YL;
#X connect 0 0 10 0;
#X connect 2 0 7 0;
#X connect 3 0 8 0;
#X connect 4 0 2 0;
#X connect 5 0 8 2;
#X connect 6 0 3 0;
#X connect 6 1 4 0;
#X connect 6 2 5 0;
#X connect 7 0 8 1;
#X connect 8 0 11 0;
#X connect 10 0 6 0;
#X connect 11 0 1 0;
#X connect 12 0 14 0;
#X connect 14 0 11 1;
#X restore 124 239 pd get-Lth;
#X connect 0 0 15 1;
#X connect 1 0 3 0;
#X connect 2 0 15 0;
#X connect 2 1 1 1;
#X connect 3 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 7 1 0 0;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 10 0 0 1;
#X connect 11 0 14 0;
#X connect 14 0 13 0;
#X connect 14 1 8 0;
#X connect 14 2 1 0;
#X connect 14 3 8 1;
#X connect 14 3 5 0;
#X connect 14 4 2 1;
#X connect 15 0 9 0;
#X restore 184 95 pd YL;
#N canvas 742 146 584 680 AL 0;
#X obj 90 148 until;
#X obj 222 27 inlet;
#X obj 90 27 inlet;
#N canvas 301 23 368 336 set-array 0;
#X obj 147 66 inlet;
#X obj 174 195 array define yl_\$0;
#X obj 174 122 list length;
#X obj 174 143 change;
#X msg 174 168 resize \$1;
#X obj 147 94 t l l;
#X obj 147 221 array set yl_\$0;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 5 1 2 0;
#X restore 222 87 pd set-array;
#N canvas 301 23 363 323 set-array 0;
#X obj 85 52 inlet;
#X obj 214 108 list length;
#X obj 214 129 change;
#X msg 214 177 resize \$1;
#X obj 214 204 array define hz_\$0;
#X obj 149 237 array set hz_\$0;
#X obj 85 80 trigger bang list list;
#X obj 85 286 outlet;
#X obj 235 151 v size_\$0;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 8 0;
#X connect 3 0 4 0;
#X connect 6 0 7 0;
#X connect 6 1 5 0;
#X connect 6 2 1 0;
#X restore 90 63 pd set-array;
#X obj 90 89 v size_\$0;
#X obj 137 147 v i_\$0;
#X obj 109 251 until;
#X obj 90 202 v size_\$0;
#X obj 232 309 sel 1;
#N canvas 374 23 390 156 hz2erb 0;
#X obj 75 67 expr 11.17 * log(($f1+0.312)/($f1+14.675)) + 43;
#X obj 75 40 inlet;
#X obj 75 94 outlet;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X restore 397 385 pd hz2erb;
#X obj 397 357 expr hz_\$0[i_\$0] * 0.001;
#X obj 232 332 trigger bang bang, f 28;
#N canvas 374 23 390 156 hz2erb 0;
#X obj 75 67 expr 11.17 * log(($f1+0.312)/($f1+14.675)) + 43;
#X obj 75 40 inlet;
#X obj 75 94 outlet;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X restore 232 385 pd hz2erb;
#X obj 232 357 expr hz_\$0[j_\$0] * 0.001, f 25;
#X obj 422 410 v dif_\$0;
#X obj 232 417 expr dif_\$0 = abs($f1 - $f2);
#X obj 232 445 < 3;
#X obj 232 466 sel 1;
#X obj 232 524 expr sum_\$0 = sum_\$0 + pow(10 \, $f1/20);
#X obj 52 403 expr 20 * log10(sum_\$0);
#X obj 52 425 max 0;
#X obj 90 112 t f b;
#X obj 90 224 t b f b;
#X msg 157 228 0;
#X obj 157 250 v j_\$0;
#X msg 137 112 0;
#X obj 52 472 max 0;
#X obj 232 494 expr yl_\$0[j_\$0] - kM_\$0 * dif_\$0;
#X obj 52 450 expr yl_\$0[i_\$0] - $f1;
#X obj 52 566 outlet;
#X obj 297 203 v kM_\$0;
#X msg 297 180 12;
#X obj 297 158 loadbang;
#X obj 156 200 v sum_\$0;
#X msg 156 176 0;
#X obj 109 273 expr j_\$0 = j_\$0 + 1 \; j_\$0 != i_\$0;
#X obj 90 309 expr i_\$0 = i_\$0 + 1;
#X obj 90 173 t b b;
#X connect 0 0 38 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 22 0;
#X connect 7 0 36 0;
#X connect 8 0 23 0;
#X connect 9 0 12 0;
#X connect 10 0 16 1;
#X connect 11 0 10 0;
#X connect 12 0 14 0;
#X connect 12 1 11 0;
#X connect 13 0 16 0;
#X connect 14 0 13 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 28 0;
#X connect 20 0 21 0;
#X connect 21 0 29 0;
#X connect 22 0 0 0;
#X connect 22 1 26 0;
#X connect 23 0 20 0;
#X connect 23 0 37 0;
#X connect 23 1 7 0;
#X connect 23 2 24 0;
#X connect 24 0 25 0;
#X connect 26 0 6 0;
#X connect 27 0 30 0;
#X connect 28 0 19 0;
#X connect 29 0 27 0;
#X connect 32 0 31 0;
#X connect 33 0 32 0;
#X connect 35 0 34 0;
#X connect 36 1 9 0;
#X connect 38 0 8 0;
#X connect 38 1 35 0;
#X restore 184 123 pd AL;
#X text 226 94 <= Auditory Levels;
#X text 225 122 Eq.6;
#X obj 126 193 list store;
#X msg 184 148 append \$1;
#X obj 74 62 t l b l b;
#X obj 126 222 outlet;
#X obj 76 222 outlet;
#X obj 211 33 inlet;
#X obj 74 33 inlet;
#X connect 0 0 1 0;
#X connect 0 1 1 1;
#X connect 1 0 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 6 1 4 0;
#X connect 6 2 0 0;
#X connect 6 3 4 1;
#X connect 9 0 0 1;
#X connect 10 0 6 0;
#X restore 414 188 pd AL;
#X obj 433 66 declare -path psycho;
#X obj 110 198 al;
#X connect 0 0 2 0;
#X connect 0 1 3 0;
#X connect 1 0 0 0;
#X connect 2 0 18 0;
#X connect 3 0 18 1;
#X connect 4 0 7 0;
#X connect 5 0 16 0;
#X connect 6 0 16 1;
#X connect 7 0 5 0;
#X connect 7 1 6 0;
#X connect 16 0 9 0;
#X connect 16 1 8 0;
#X connect 18 0 11 0;
#X connect 18 1 10 0;
